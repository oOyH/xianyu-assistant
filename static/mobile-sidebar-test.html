<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>移动端侧边栏测试 - 闲鱼自动回复系统</title>
    <link rel="stylesheet" href="/static/lib/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="/static/lib/bootstrap-icons/bootstrap-icons.css">
    <link rel="stylesheet" href="/static/css/app.css">
    <style>
        .test-content {
            padding: 2rem;
            background: var(--glass-bg);
            border: 1px solid var(--glass-border);
            border-radius: 1rem;
            margin: 1rem 0;
        }
        
        .test-instruction {
            background: rgba(13, 110, 253, 0.1);
            border: 1px solid rgba(13, 110, 253, 0.3);
            border-radius: 0.75rem;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .test-step {
            display: flex;
            align-items: center;
            padding: 0.75rem;
            margin: 0.5rem 0;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 0.5rem;
            gap: 0.75rem;
        }
        
        .step-number {
            width: 30px;
            height: 30px;
            background: var(--accent-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 0.875rem;
        }
        
        .demo-button {
            margin: 0.5rem;
            min-height: 48px;
            font-size: 16px;
        }
    </style>
</head>
<body>
    <!-- 侧边栏 -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <a href="#" class="sidebar-brand">
                <i class="bi bi-chat-dots-fill"></i>
                测试系统
            </a>
        </div>
        <nav class="sidebar-nav">
            <div class="nav-item">
                <a href="#" class="nav-link active" onclick="showTestSection('test1')">
                    <i class="bi bi-1-circle"></i>
                    测试页面1
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" onclick="showTestSection('test2')">
                    <i class="bi bi-2-circle"></i>
                    测试页面2
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" onclick="showTestSection('test3')">
                    <i class="bi bi-3-circle"></i>
                    测试页面3
                </a>
            </div>
            <div class="nav-item">
                <a href="#" class="nav-link" onclick="showTestSection('test4')">
                    <i class="bi bi-4-circle"></i>
                    测试页面4
                </a>
            </div>
        </nav>
    </div>

    <!-- 主内容区域 -->
    <div class="main-content">
        <!-- 移动端菜单切换按钮 -->
        <button class="mobile-toggle" onclick="toggleSidebar()">
            <i class="bi bi-list"></i>
        </button>

        <div class="container-fluid">
            <div class="content-header">
                <h2><i class="bi bi-bug me-2"></i>移动端布局修复测试</h2>
                <p class="text-muted mb-0">验证菜单按钮位置和侧边栏交互修复效果</p>
            </div>

            <div class="content-body">
                <!-- 测试说明 -->
                <div class="test-instruction">
                    <h4><i class="bi bi-info-circle me-2"></i>布局修复测试说明</h4>
                    <p>此页面用于测试移动端菜单按钮位置和侧边栏交互修复效果。请按照以下步骤进行测试：</p>
                    
                    <div class="test-step">
                        <div class="step-number">1</div>
                        <div>
                            <strong>调整屏幕尺寸</strong>
                            <br><small>将浏览器窗口调整到移动端尺寸（宽度 < 768px）或使用开发者工具的移动端模拟</small>
                        </div>
                    </div>
                    
                    <div class="test-step">
                        <div class="step-number">2</div>
                        <div>
                            <strong>打开侧边栏</strong>
                            <br><small>点击左上角的菜单按钮（三条横线图标）打开侧边栏</small>
                        </div>
                    </div>
                    
                    <div class="test-step">
                        <div class="step-number">3</div>
                        <div>
                            <strong>点击导航链接</strong>
                            <br><small>点击侧边栏中的任意导航链接（测试页面1-4）</small>
                        </div>
                    </div>
                    
                    <div class="test-step">
                        <div class="step-number">4</div>
                        <div>
                            <strong>验证修复效果</strong>
                            <br><small>1) 菜单按钮不应遮挡标题文字 2) 侧边栏应自动关闭 3) 内容完全可见</small>
                        </div>
                    </div>
                </div>

                <!-- 布局验证区域 -->
                <div class="test-content" style="background: rgba(255, 193, 7, 0.1); border: 2px dashed #ffc107;">
                    <h4><i class="bi bi-exclamation-triangle me-2"></i>布局验证区域</h4>
                    <p><strong>重要检查点：</strong></p>
                    <ul>
                        <li>✅ 这个标题应该完全可见，不被左上角菜单按钮遮挡</li>
                        <li>✅ 菜单按钮应该在左上角，但不覆盖任何文字内容</li>
                        <li>✅ 点击菜单按钮应该能正常打开侧边栏</li>
                        <li>✅ 点击导航链接后侧边栏应该自动关闭</li>
                    </ul>
                    <div class="alert alert-warning">
                        <strong>如果您看到这个黄色边框的完整内容，说明布局修复成功！</strong>
                    </div>
                </div>

                <!-- 测试内容区域 -->
                <div id="test1" class="test-content">
                    <h3><i class="bi bi-1-circle-fill me-2"></i>测试页面 1 - 布局修复验证</h3>
                    <p>这是测试页面1的内容。如果您能看到这个标题且没有被菜单按钮遮挡，说明布局修复成功！</p>
                    
                    <div class="row g-3">
                        <div class="col-6 col-md-3">
                            <button class="btn btn-primary demo-button w-100">
                                <i class="bi bi-check me-2"></i>按钮1
                            </button>
                        </div>
                        <div class="col-6 col-md-3">
                            <button class="btn btn-success demo-button w-100">
                                <i class="bi bi-star me-2"></i>按钮2
                            </button>
                        </div>
                        <div class="col-6 col-md-3">
                            <button class="btn btn-warning demo-button w-100">
                                <i class="bi bi-heart me-2"></i>按钮3
                            </button>
                        </div>
                        <div class="col-6 col-md-3">
                            <button class="btn btn-info demo-button w-100">
                                <i class="bi bi-gear me-2"></i>按钮4
                            </button>
                        </div>
                    </div>
                    
                    <div class="mt-3">
                        <p>测试触摸操作：这些按钮应该都能正常点击，尺寸适合触摸操作。</p>
                    </div>
                </div>

                <div id="test2" class="test-content" style="display: none;">
                    <h3><i class="bi bi-2-circle-fill me-2"></i>测试页面 2</h3>
                    <p>这是测试页面2的内容。切换到这个页面时，侧边栏应该已经自动关闭。</p>
                    
                    <div class="alert alert-success">
                        <h5><i class="bi bi-check-circle me-2"></i>修复验证</h5>
                        <p class="mb-0">如果您能看到这个绿色提示框，并且侧边栏已经关闭，说明移动端交互修复成功！</p>
                    </div>
                    
                    <div class="form-group mt-3">
                        <label for="testInput" class="form-label">测试输入框</label>
                        <input type="text" class="form-control" id="testInput" placeholder="测试输入框的触摸体验">
                    </div>
                </div>

                <div id="test3" class="test-content" style="display: none;">
                    <h3><i class="bi bi-3-circle-fill me-2"></i>测试页面 3</h3>
                    <p>这是测试页面3的内容。继续验证侧边栏自动关闭功能。</p>
                    
                    <div class="table-responsive">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>项目</th>
                                    <th>状态</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>侧边栏显示</td>
                                    <td><span class="badge bg-success">正常</span></td>
                                    <td><button class="btn btn-sm btn-outline-primary">测试</button></td>
                                </tr>
                                <tr>
                                    <td>自动关闭</td>
                                    <td><span class="badge bg-success">修复</span></td>
                                    <td><button class="btn btn-sm btn-outline-success">验证</button></td>
                                </tr>
                                <tr>
                                    <td>触摸体验</td>
                                    <td><span class="badge bg-info">优化</span></td>
                                    <td><button class="btn btn-sm btn-outline-info">检查</button></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

                <div id="test4" class="test-content" style="display: none;">
                    <h3><i class="bi bi-4-circle-fill me-2"></i>测试页面 4</h3>
                    <p>这是测试页面4的内容。最后一次验证修复效果。</p>
                    
                    <div class="alert alert-info">
                        <h5><i class="bi bi-lightbulb me-2"></i>测试完成</h5>
                        <p>如果您能够：</p>
                        <ul class="mb-0">
                            <li>正常打开和关闭侧边栏</li>
                            <li>点击导航链接后侧边栏自动关闭</li>
                            <li>内容区域完全可见，不被遮挡</li>
                            <li>所有按钮和表单元素都能正常操作</li>
                        </ul>
                        <p class="mt-2 mb-0"><strong>恭喜！移动端适配修复成功！</strong></p>
                    </div>
                    
                    <div class="text-center mt-4">
                        <a href="/static/mobile-test-guide.html" class="btn btn-primary demo-button">
                            <i class="bi bi-arrow-right me-2"></i>前往完整测试指南
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 返回顶部按钮 -->
    <button class="back-to-top" id="backToTop" onclick="scrollToTop()" title="返回顶部">
        <i class="bi bi-arrow-up"></i>
    </button>

    <script>
        // 返回顶部功能
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }

        // 监听滚动事件，控制返回顶部按钮显示
        function handleBackToTopButton() {
            const backToTopButton = document.getElementById('backToTop');
            if (!backToTopButton) return;

            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;

            // 滚动超过300px时显示按钮
            if (scrollTop > 300) {
                backToTopButton.classList.add('show');
            } else {
                backToTopButton.classList.remove('show');
            }
        }

        // 监听滚动事件
        window.addEventListener('scroll', handleBackToTopButton);

        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            handleBackToTopButton();
        });
        // 移动端侧边栏切换
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('show');
        }

        // 关闭移动端侧边栏
        function closeMobileSidebar() {
            const sidebar = document.getElementById('sidebar');
            if (window.innerWidth <= 768 && sidebar.classList.contains('show')) {
                sidebar.classList.remove('show');
            }
        }

        // 显示测试页面
        function showTestSection(sectionId) {
            // 隐藏所有测试内容
            document.querySelectorAll('.test-content').forEach(section => {
                section.style.display = 'none';
            });
            
            // 显示指定内容
            document.getElementById(sectionId).style.display = 'block';
            
            // 更新导航状态
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // 设置当前链接为活动状态
            const currentLink = document.querySelector(`[onclick="showTestSection('${sectionId}')"]`);
            if (currentLink) {
                currentLink.classList.add('active');
            }
        }

        // 点击侧边栏外部关闭移动端菜单
        document.addEventListener('click', function(e) {
            const sidebar = document.getElementById('sidebar');
            const toggle = document.querySelector('.mobile-toggle');

            if (window.innerWidth <= 768 &&
                !sidebar.contains(e.target) &&
                !toggle.contains(e.target) &&
                sidebar.classList.contains('show')) {
                sidebar.classList.remove('show');
            }
        });

        // 点击侧边栏导航链接时关闭移动端菜单
        document.addEventListener('click', function(e) {
            const clickedElement = e.target;
            const sidebar = document.getElementById('sidebar');
            
            if (sidebar && sidebar.contains(clickedElement)) {
                const navLink = clickedElement.closest('.nav-link');
                const hasShowSection = clickedElement.getAttribute('onclick') && 
                                      clickedElement.getAttribute('onclick').includes('showTestSection');
                
                if (navLink || hasShowSection) {
                    setTimeout(function() {
                        closeMobileSidebar();
                    }, 150);
                }
            }
        });
    </script>
</body>
</html>
